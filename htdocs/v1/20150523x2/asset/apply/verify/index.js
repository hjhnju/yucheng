define("apply/verify/index",["require","jquery","apply/common/applyCommon","common/util","common/config","common/Remoter"],function(require){function e(e){r=e,r=e,i=a.init(r,o),t(),n()}function t(){s(".loan .form-inpt input").on({focus:function(){var e=s(this).parent().parent(),t=e.find(".input-icon"),n=e.find(".input-error"),i=s(this).next();i.addClass("hidden"),t.attr("class","input-icon fl"),n.html("")},blur:function(){var e=s(this).parent().parent(),t=s.trim(s(this).val()),n=s(this).attr("data-text"),i=e.find(".input-icon"),r=e.find(".input-error"),o=s(this).next();if(!t)o.removeClass("hidden"),i.addClass("error"),r.html(n+"不能为空")}}),d.name.blur(function(){var e=s.trim(s(this).val());if(!b.test(e))return m.name=0,y.nameIcon.addClass("error"),void g.nameError.html("与营业执照或登记证书一致");else return m.name=1,void y.nameIcon.addClass("success")}),d.realname.blur(function(){var e=s.trim(s(this).val());if(!b.test(e))return m.realname=0,y.realnameIcon.addClass("error"),void g.realnameError.html("请输入真实姓名");else return m.realname=1,void y.realnameIcon.addClass("success")}),d.password.blur(function(){var e=s.trim(s(this).val());if(!v.test(e))return m.password=0,y.passwordIcon.addClass("error"),void g.passwordError.html("密码只能为6-32位数字,字母及常用符号组成");else return m.password=1,void y.passwordIcon.addClass("success")}),d.password2.blur(function(){var e=s.trim(s(d.password).val()),t=s.trim(s(this).val());if(!t||t!=e)return m.password2=0,y.password2Icon.addClass("error"),void g.password2Error.html("两次输入的密码不一致 ");else return m.password2=1,void y.password2Icon.addClass("success")}),d.email.blur(function(){var e=s.trim(s(this).val());if(e)p.remote({email:e})}),x.click(function(e){e.preventDefault(),s(this).attr("src",w+T+"&r="+(new Date).getTime())}),s(".loan .loan-submit").click(l.debounce(function(e){if(e.preventDefault(),s(this).hasClass("login"))h.password=0,h.password2=0,h.imagecode=0;for(var t in h)if(h[t]){if(d[t].trigger("blur"),!m[t])return;if(!d[t].val())return y[t+"Icon"].addClass("error"),void g[t+"Error"].html(d[t].attr("data-text")+"不能为空")}i=a.calformParams(r,o),c.remote({amount:i.amount,duration:i.duration,duration_type:i.duration_type,service_charge:i.service_charge,name:d.name.val(),realname:d.realname.val(),email:d.email.val(),password:m.password?d.password.val():"",imagecode:m.imagecode?d.imagecode.val():""})},1e3))}function n(){p.on("success",function(e){if(e&&e.bizError)m.email=0,y.emailIcon.addClass("error"),g.emailError.html(e.statusInfo);else y.emailIcon.addClass("success"),g.emailError.html(""),m.email=1}),c.on("success",function(e){if(e.imgCode)g.imgcode.html(e.statusInfo),x.attr("src",e.data.url+T+"&r="+(new Date).getTime());else if(e&&e.bizError)g.errorbox.html(e.statusInfo);else;})}var i,r,o,s=require("jquery"),a=require("apply/common/applyCommon"),l=require("common/util"),u=require("common/config"),f=require("common/Remoter"),c=new f("APPLY_VERIFY_SUBMIT"),p=new f("APPLY_VERIFY_CHECKEMAIL"),d={name:s("[name='name']"),realname:s("[name='realname']"),email:s("[name='email']"),password:s("[name='password']"),password2:s("[name='password2']"),imagecode:s("#loan-imagecode")},h={name:1,realname:1,email:1,password:1,password2:1,imagecode:1},m={name:1,realname:1,email:1,password:1,password2:1,imagecode:1},g={errorbox:s("#error-box"),nameError:s("#name-error"),realnameError:s("#realname-error"),emailError:s("#email-error"),passwordError:s("#password-error"),password2Error:s("#password2-error"),imagecodeError:s("#loan-testing")},y={nameIcon:s("#name-icon"),realnameIcon:s("#realname-icon"),emailIcon:s("#email-icon"),passwordIcon:s("#password-icon"),password2Icon:s("#password2-icon"),imagecodeIcon:s("#imagecode-icon")},v=/^[a-zA-Z0-9!@#$%^&'\(\({}=+\-]{6,20}$/,b=/[\u4e00-\u9fa5]+/i,x=s("#login-img-url"),w=u.URL.IMG_GET,T="regist";return{init:e}});