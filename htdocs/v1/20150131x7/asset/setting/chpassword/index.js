define("setting/chpassword/index",["require","jquery","common/Remoter","etpl","./chpassword.tpl","common/header"],function(require){function e(){t(),o.compile(s),a.init()}function t(){var e=r("#confirm-new-ipt");e.on({focus:function(){r("#error").html("")},blur:function(){var e=r("#new-ipt"),t=+e.val(),n=+r("#confirm-new-ipt").val();if(t!==n)return void r("#error").html("两次密码不一致");else return void 0}}),r(".chpwd-link").click(function(){var e=r("#old-ipt"),t=r("#new-ipt"),n=r("#confirm-new-ipt");if(!e.val())return void r("#error").html("原始密码不能为空");else return r("#error").html(""),n.trigger("blur"),void i.remote({oldpwd:e.val(),newpwd:t.val()})}),i.on("success",function(e){if(e&&e.bizError)r("#error").html(e.statusInfo);else{var t,n=8;r("#error").html(""),r("#chpwd-box").html(o.render("list")),t=setInterval(function(){if(r("#time-span").text(--n+"秒后自动跳转"),0===n)clearInterval(t),window.location.href="/account/overview/index"},1e3)}})}var r=require("jquery"),n=require("common/Remoter"),i=new n("EDIT_CHPWD_SUBMITE"),o=require("etpl"),s=require("./chpassword.tpl"),a=require("common/header");return{init:e}});