define("setting/chpassword/index",function(require){function e(){t(),o.compile(s),a.init()}function t(){var e=n("#confirm-new-ipt");e.on({focus:function(){n("#error").html("")},blur:function(){var e=n("#new-ipt"),t=+e.val(),i=+n("#confirm-new-ipt").val();if(t!==i)return void n("#error").html("两次密码不一致");else return void 0}}),n(".chpwd-link").click(function(){var e=n("#old-ipt"),t=n("#new-ipt"),i=n("#confirm-new-ipt");if(!e.val())return void n("#error").html("原始密码不能为空");else return n("#error").html(""),i.trigger("blur"),void r.remote({oldpwd:e.val(),newpwd:t.val()})}),r.on("success",function(e){if(e&&e.bizError)n("#error").html(e.statusInfo);else{var t,i=8;n("#error").html(""),n("#chpwd-box").html(o.render("list")),t=setInterval(function(){if(n("#time-span").text(--i+"秒后自动跳转"),0===i)clearInterval(t),window.location.href="/account/overview/index"},1e3)}})}var n=require("jquery"),i=require("common/Remoter"),r=new i("EDIT_CHPWD_SUBMITE"),o=require("etpl"),s=require("./chpassword.tpl"),a=require("common/header");return{init:e}});