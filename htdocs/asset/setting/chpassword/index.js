define("setting/chpassword/index",["require","jquery","common/Remoter","etpl","./chpassword.tpl","common/header"],function(require){function e(){t(),o.compile(a),s.init()}function t(){var e=n("#confirm-new-ipt");e.on({focus:function(){n("#error").html("")},blur:function(){var e=n("#new-ipt"),t=+e.val(),r=+n("#confirm-new-ipt").val();if(t!==r)return void n("#error").html("两次密码不一致");else return void 0}}),n(".chpwd-link").click(function(){var e=n("#old-ipt"),t=n("#new-ipt"),r=n("#confirm-new-ipt");if(!e.val())return void n("#error").html("原始密码不能为空");else return n("#error").html(""),r.trigger("blur"),void i.remote({oldpwd:e.val(),newpwd:t.val()})}),i.on("success",function(e){if(e&&e.bizError)n("#error").html(e.statusInfo);else{var t,r=8;n("#error").html(""),n("#chpwd-box").html(o.render("list")),t=setInterval(function(){if(n("#time-span").text(--r+"秒后自动跳转"),0===r)clearInterval(t),window.location.href="/account/overview/index"},1e3)}})}var n=require("jquery"),r=require("common/Remoter"),i=new r("EDIT_CHPWD_SUBMITE"),o=require("etpl"),a=require("./chpassword.tpl"),s=require("common/header");return{init:e}});