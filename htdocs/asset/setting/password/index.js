define("setting/password/index",["require","jquery","common/Remoter","common/header"],function(require){function e(){s.init(),r(".login-input").on({focus:function(){r(this).parent().children(".user-lable").addClass("hidden"),r(this).parent().removeClass("current"),r(this).next().addClass("current"),t.html("")},blur:function(){var e=r(this).val();if(!e)return r(this).next().hasClass("hidden"),r(this).next().removeClass("hidden"),void r(this).parent().addClass("current");else return void 0}}),r("#login-user").blur(function(){var e=r(this).val();if(!e)t.html("用户名不能为空"),l.user=0;else l.user=1}),r("#login-phone").blur(function(){var e=r(this).val();if(!e)t.html("手机号不能为空"),l.phone=0;else l.phone=1,r("#sendsmscode").removeClass("disable")}),r("#login-testing").blur(function(){var e=r(this).val();if(!e)t.html("验证码不能为空"),l.testing=0;else l.testing=1}),r("#sendsmscode").click(function(){var e=r.trim(r("#login-phone").val());if(e&&!r(this).hasClass("disable"))i.remote({phone:e,type:7})}),i.on("success",function(e){var n=60;if(e&&e.bizError)t.html(e.statusInfo);else{var i=r("#testing-wait");i.text("60秒后重新发送"),i.addClass("show"),timer=setInterval(function(){if(i.text(--n+"秒后重新发送"),0>n)clearInterval(timer),i.removeClass("show")},1e3)}}),r("#login-reset").blur(function(){var e=r(this).val();if(!e)t.html("密码不能为空"),l.reset=0;else l.reset=1}),r("#login-affirm").blur(function(){var e=r("#login-reset").val(),n=r(this).val();if(e!==n)return void t.html("两次密码不一致");else return void 0}),r(".login-fastlogin").click(function(){var e=1,n=r("#login-user").val(),i=r("#login-phone").val(),s=r("#login-testing").val(),a=r("#login-reset").val(),u=r("#login-affirm").val();for(var c in l)if(l.hasOwnProperty(c))if(!l[c])r("#login-"+c).trigger("blur"),e=0;if(a!==u)return void t.html("两次密码不一致");else return void(e&&o.remote("post",{user:n,phone:i,vericode:s,passwd:a,type:7}))}),o.on("success",function(e){if(e&&e.bizError)t.html(e.statusInfo);else;})}var r=require("jquery"),n=(r(".login-username").children(".user-lable"),require("common/Remoter")),i=new n("REGIST_SENDSMSCODE_CHECK"),t=r(".error"),o=new n("USER_REGISTAPI_MODIFYPWD"),s=require("common/header"),l={reset:0,testing:0,phone:0,user:0};return{init:e}});