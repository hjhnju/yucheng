define("setting/email/index",["require","jquery","common/Remoter","common/config","etpl","./email.tpl"],function(require){function e(){t(),s.compile(l)}function t(){r(".login-input").on({focus:function(){r(this).parent();r(this).next().addClass("hidden")},blur:function(){var e=r(this).val();!e&&r(this).next().removeClass("hidden")}}),r("#email-img").click(function(){r(this).attr("src",c)}),getSmscode.on("success",function(e){if(e&&e.bizError)alert(e.statusInfo);else r("#email-img").attr("src",e.url)}),r("#confirm").click(function(){n=r("#login-email").val();var e=r("#login-testing").val();a.remote({email:n,smscode:e,type:4})}),a.on("success",function(e){if(e&&e.bizError)r(".error").html(e.statusInfo);else{var t,i=6;r("#checkemial").html(s.render("list2nd",{email:n})),t=setInterval(function(){if(r("#time-span").text(--i+"秒后自动跳转"),0===i)clearInterval(t),window.location.href="/account/overview/index"},1e3)}})}var n,r=require("jquery"),i=require("common/Remoter"),o=require("common/config"),a=new i("EDIT_EMAILCONFIRM"),s=require("etpl"),l=require("./email.tpl"),c=o.URL.IMG_GET+"email";return{init:e}});