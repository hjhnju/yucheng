/*! 2014 Baidu Inc. All Rights Reserved */
define("setting/email/index",["require","jquery","common/Remoter","etpl","./email.tpl"],function(require){function e(){t(),a.compile(l),s.remote({type:4})}function t(){r(".login-input").on({focus:function(){r(this).parent();r(this).next().addClass("hidden")},blur:function(){var e=r(this).val();!e&&r(this).next().removeClass("hidden")}}),r("#email-img").click(function(){s.remote({type:4})}),s.on("success",function(e){if(e&&e.bizError)alert(e.statusInfo);else r("#email-img").attr("src",e.url)}),r("#confirm").click(function(){n=r("#login-email").val();var e=r("#login-testing").val();o.remote({email:n,smscode:e,type:4})}),o.on("success",function(e){if(e&&e.bizError)r(".error").html(e.statusInfo);else{var t,i=8;r("#checkemial").html(a.render("list2nd",{email:n})),t=setInterval(function(){if(r("#time-span").text(--i+"秒后自动跳转"),0===i)clearInterval(t),window.location.href="/account/views/overview/index"},1e3)}})}var n,r=require("jquery"),i=require("common/Remoter"),o=new i("EDIT_EMAILCONFIRM"),s=new i("LOGIN_IMGCODE_ADD"),a=(new i("LOGIN_IMGCODE_CHECK"),require("etpl")),l=require("./email.tpl");return{init:e}});