/*! 2015 Baidu Inc. All Rights Reserved */
define("setting/login/index",function(require){function n(){t.init(),o.init(),e(),i()}function e(){r(".login .login-input").on({focus:function(){var n=r(this).parent(),e=n.children(".username-error");n.removeClass("current"),e.html(""),r(this).next().addClass("hidden")},blur:function(){var n=r.trim(r(this).val());!n&&r(this).next().removeClass("hidden")}}),r("#login-testing").blur(function(){var n=r.trim(r(this).val());if(!n)return r(this).parent().addClass("current"),void r("#login-testing-error").html("验证码不能为空");else return void c.remote({imgcode:n,type:2})}),f.click(function(n){n.preventDefault(),r(this).attr("src",u)}),r(".login .login-fastlogin").click(function(n){n.preventDefault();var e=r.trim(r("#login-user").val()),i=r.trim(r("#login-pwd").val());if(!e||!i)m.html("用户名或密码不能为空");else a.remote({name:e,passwd:i})})}function i(){a.on("success",function(n){if(n.imgCode){var e=r(".login-display-none:eq(0)");e.removeClass("login-display-none"),f.attr("src",n.data.url)}else if(n.bizError)r("#login-error").html(n.statusInfo);else window.location.href="/account/overview/index"}),c.on("success",function(n){if(n.bizError)alert(n.statusInfo);else r("#login-testing-error").html('<span class="username-error-span"></span>')})}var r=require("jquery"),o=require("../common/picScroll"),t=require("common/header"),l=require("common/Remoter"),s=require("common/config"),a=new l("LOGIN_INDEX_CHECK"),c=new l("LOGIN_IMGCODE_CHECK"),u=s.URL.IMG_GET+"login",m=r("#login-error"),f=r("#login-img-url");return{init:n}});